{"version":3,"sources":["services/firebase.js","components/Header.js","components/Footer.js","pages/Home.js","pages/Result.js","helpers/db.js","pages/Chat.js","helpers/auth.js","pages/Signup.js","pages/Login.js","App.js","reportWebVitals.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","databaseURL","auth","db","database","dt","Header","props","user_id","className","to","type","data-toggle","data-target","aria-controls","aria-expanded","aria-label","id","currentUser","onClick","user","ref","child","set","onDisconnect","ServerValue","TIMESTAMP","signOut","delete","then","catch","error","console","log","Footer","HomePage","Component","Result","updateUserConnection","on","snap","val","listenUsers","t","once","snapshot","key","state","listUser","forEach","logged","setState","listenNewMessage","data","loadApp","Chat","_isMounted","conver_user","chats","users","content","search","readError","writeError","loadingChats","handleChange","bind","handleChangeSearch","handleSubmit","checkEnter","myRef","React","createRef","e","a","keyCode","this","chatArea","current","timestamp","Date","now","from_uid","to_uid","push","scrollBy","scrollHeight","message","firt","s","u","mess","sort","b","converId","find","ur","length","converUser","filter","us","$","document","ready","click","toggle","event","target","value","preventDefault","d","getDate","getMonth","getFullYear","getHours","getMinutes","role","index","username","indexOf","hanldeSwitchConversation","src","profile_picture","alt","renderElementLoading","placeholder","onChange","map","renderUser","formatTime","last_online","chat","onSubmit","onKeyUp","email","signInWithGoogle","provider","GoogleAuthProvider","signInWithPopup","signInWithGitHub","GithubAuthProvider","SignUp","password","googleSignIn","githubSignIn","name","createUserWithEmailAndPassword","Login","signInWithEmailAndPassword","autoComplete","PrivateRoute","component","authenticated","rest","render","pathname","from","location","PublicRoute","App","loading","exact","path","Home","Signup","onAuthStateChanged","curent","photo","addUser","displayName","photoURL","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.000bc7ad.chunk.js","sourcesContent":["import firebase from \"firebase/app\";\r\nimport \"firebase/auth\";\r\nimport \"firebase/database\";\r\nconst config = {\r\n  apiKey: \"AIzaSyADdW9WsBiwihH4ToCdbLVBELIRBrKTBP8\",\r\n  authDomain: \"chatty-b51b5.firebaseapp.com\",\r\n  databaseURL: \"https://chatty-b51b5-default-rtdb.firebaseio.com/\"\r\n};\r\n\r\nfirebase.initializeApp(config);\r\n\r\nexport const auth = firebase.auth;\r\nexport const db = firebase.database();\r\nexport const dt = firebase.database;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { auth , db , dt } from '../services/firebase';\r\nfunction Header(props) {\r\n  let user_id = props.user_id;\r\n  function remove(){\r\n    var user = auth().currentUser;\r\n    user.delete().then(function() {\r\n    // User deleted.\r\n  }).catch(function(error) {\r\n    console.log(error);\r\n  });\r\n  }\r\n  return (\r\n    <header>\r\n      <nav className=\"navbar navbar-expand-sm fixed-top navbar-light bg-light\">\r\n        <Link className=\"navbar-brand\" to=\"/\">Chatty</Link>\r\n        <button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarNavAltMarkup\" aria-controls=\"navbarNavAltMarkup\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n          <span className=\"navbar-toggler-icon\"></span>\r\n        </button>\r\n        <div className=\"collapse navbar-collapse justify-content-end\" id=\"navbarNavAltMarkup\">\r\n          {auth().currentUser\r\n            ? <div className=\"navbar-nav\">\r\n              <Link className=\"nav-item nav-link mr-3\" to=\"/chat\">Profile</Link>\r\n              <button className=\"btn btn-primary mr-3\" onClick={() => {let user = db.ref('users').child(user_id);user.child('logged').set(false);user.child('last_online').onDisconnect().set(dt.ServerValue.TIMESTAMP);auth().signOut();}}>Logout</button>\r\n              <button className=\"btn btn-primary mr-3\" onClick={() => remove()}>Remove</button>\r\n            </div>\r\n            : <div className=\"navbar-nav\">\r\n              <Link className=\"nav-item nav-link mr-3\" to=\"/login\">Sign In</Link>\r\n              <Link className=\"nav-item nav-link mr-3\" to=\"/signup\">Sign Up</Link>\r\n            </div>}\r\n        </div>\r\n      </nav>\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","import React from 'react';\r\n\r\nfunction Footer() {\r\n  return (\r\n    <footer className=\"pt-5\">\r\n      <div className=\"container text-center\">\r\n        <p>&copy; Chatty 2020.</p>\r\n      </div>\r\n    </footer>\r\n  )\r\n}\r\n\r\nexport default Footer;","import React, { Component } from 'react';\r\nimport Header from '../components/Header';\r\nimport Footer from '../components/Footer';\r\nimport { Link } from 'react-router-dom';\r\n\r\nexport default class HomePage extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"home\">\r\n        <Header></Header>\r\n        <section>\r\n          <div className=\"jumbotron jumbotron-fluid py-5\">\r\n            <div className=\"container text-center py-5\">\r\n              <h1 className=\"display-4\">Welcome to Chatty</h1>\r\n              <p className=\"lead\">A great place to share your thoughts with friends</p>\r\n              <div className=\"mt-4\">\r\n                <Link className=\"btn btn-primary px-5 mr-3\" to=\"/signup\">Create New Account</Link>\r\n                <Link className=\"btn px-5\" to=\"/login\">Login to Your Account</Link>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </section>\r\n        <Footer></Footer>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React from 'react';\r\n\r\n\r\nfunction Result(props) {\r\n  let users = props.users;\r\n  let search = props.search;\r\n  function renderUser(user,index){\r\n    if(user.username.indexOf(search) !== -1){\r\n      return <div key={index} className=\"list__search\">\r\n              <div className=\"search__avatar\"><img src={user.profile_picture} alt=\"\" /></div>\r\n              <div className=\"search__info\">\r\n                <span className=\"info__name\">{user.username}</span>\r\n                <span className={\"info__status \" + (user.logged ? 'online' : 'offline')}>{user.logged ? 'online' : 'offline'}</span>\r\n              </div>\r\n            </div>\r\n    }\r\n    return null;\r\n  }\r\n  return (\r\n    <div className=\"box__search\">\r\n      <h3 className=\"title__search\">Discover</h3>\r\n      <div className=\"warpper__search\">\r\n      {users.map((user,index) => renderUser(user,index))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Result;\r\n","import { db , dt } from \"../services/firebase\";\r\n\r\nexport function readChats() {\r\n  let abc = [];\r\n  db.ref(\"chats\").on(\"value\", snapshot => {\r\n    snapshot.forEach(snap => {\r\n      abc.push(snap.val())\r\n    });\r\n    return abc;\r\n  });\r\n}\r\n\r\nexport function updateUserConnection(user_id){\r\n  let user = db.ref('users').child(user_id);\r\n  if(!user){\r\n    return;\r\n  }\r\n  db.ref('.info/connected').on('value', function (snap) {\r\n    if ( snap.val() === true ) {\r\n      user.child('logged').set(true);\r\n      user.child('logged').onDisconnect().set(false);\r\n      user.child('last_online').onDisconnect().set(dt.ServerValue.TIMESTAMP);\r\n    }\r\n});\r\n}\r\nexport function filterUserFrontEnd(arr,user_id) {\r\n  arr.forEach((a,index) =>{\r\n    if(a.user_id == user_id){\r\n      arr.splice(index, 1);\r\n    }\r\n  });\r\n  return arr;\r\n}\r\nexport function listenUsers(t){\r\n  db.ref(\"users\").once(\"child_changed\", snapshot => {\r\n    \r\n    let users = [];\r\n    let snap = snapshot.val();\r\n    let user_id = snapshot.key;\r\n    t.state.listUser.forEach(user => {\r\n      if(user.user_id == user_id){\r\n        user.logged = snap.logged;\r\n        listenUsers(t);\r\n      }\r\n    });\r\n    t.setState({listUser : t.state.listUser});\r\n  });\r\n  \r\n}\r\nexport function readUsers() {\r\n  db.ref(\"users\").once(\"value\", snapshot => {\r\n    let users = [];\r\n    let snap = snapshot.val();\r\n    for(var s in snap){\r\n      let u = snap[s];\r\n      u.user_id = s;\r\n      users.push(u);\r\n    }\r\n    return users;\r\n  });\r\n}\r\nexport function writeChats(message) {\r\n  return db.ref(\"chats\").push({\r\n    content: message.content,\r\n    timestamp: message.timestamp,\r\n    uid: message.uid\r\n  });\r\n}\r\n\r\nexport function addUser(email,name,photo) {\r\n  db.ref(\"users\").push({\r\n    username: name,\r\n    email: email,\r\n    profile_picture : photo,\r\n  });\r\n}\r\nexport function listenNewMessage(t){\r\n  db.ref(\"chats\").on('child_added', (data) => {\r\n    console.log(data);\r\n    t.loadApp(false);\r\n  });\r\n}\r\n","import React, { Component } from \"react\";\r\nimport Header from \"../components/Header\";\r\nimport { auth } from \"../services/firebase\";\r\nimport { db } from \"../services/firebase\";\r\nimport Result from '../pages/Result';\r\nimport $ from 'jquery';\r\nimport { readUsers , addUser , filterUserFrontEnd , updateUserConnection , listenUsers , listenNewMessage } from '../helpers/db';\r\nexport default class Chat extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this._isMounted = false;\r\n    this.state = {\r\n      user: this.props.user,\r\n      conver_user : {},\r\n      chats: [],\r\n      users: [],\r\n      listUser: [],\r\n      content: '',\r\n      search : '',\r\n      readError: null,\r\n      writeError: null,\r\n      loadingChats: false\r\n    };\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleChangeSearch = this.handleChangeSearch.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.checkEnter = this.checkEnter.bind(this);\r\n    this.myRef = React.createRef();\r\n  }\r\n  async checkEnter(e) {\r\n    if (e.keyCode === 13) {\r\n      this.setState({ writeError: null });\r\n      const chatArea = this.myRef.current;\r\n      try {\r\n        let data = {\r\n          content: this.state.content,\r\n          timestamp: Date.now(),\r\n          from_uid: this.state.user.user_id,\r\n          to_uid : this.state.conver_user.user_id,\r\n        };\r\n        await db.ref(\"chats\").push(data);\r\n        this.setState({ content: '' });\r\n        chatArea.scrollBy(0, chatArea.scrollHeight);\r\n      } catch (error) {\r\n        this.setState({ writeError: error.message });\r\n      }\r\n    }\r\n  }\r\n  async componentWillUnmount() {\r\n    this._isMounted = false;\r\n }\r\n  loadApp(firt){\r\n    const chatArea = this.myRef.current;\r\n    db.ref(\"users\").once(\"value\", snapshot => {\r\n      let users = [];\r\n      let snap = snapshot.val();\r\n      for(var s in snap){\r\n          let u = snap[s];\r\n          u.user_id = s;\r\n        users.push(u);\r\n    }\r\n    this.setState({ users : users });\r\n      db.ref(\"chats\").once(\"value\", snapshot => {\r\n        let chats = [];\r\n        snapshot.forEach((snap) => {\r\n          let mess = snap.val();\r\n          if(mess.from_uid == this.state.user.user_id || mess.to_uid == this.state.user.user_id){\r\n            chats.push(mess);\r\n          }\r\n        });\r\n        chats.sort(function (a, b) { return a.timestamp - b.timestamp });\r\n        let listUser = [];\r\n        chats.forEach( mess => {\r\n          if(mess.from_uid == this.state.user.user_id){\r\n            if(!listUser.find(e => e.user_id == mess.to_uid)){\r\n              let ur = users.find(u => u.user_id == mess.to_uid);\r\n              if(typeof ur != \"undefined\"){\r\n                listUser.push(ur);\r\n              }\r\n            }\r\n          }\r\n          else{\r\n            if(!listUser.find(e => e.user_id == mess.from_uid)){\r\n              let ur = users.find(u => u.user_id == mess.from_uid);\r\n              if(typeof ur != \"undefined\"){\r\n                listUser.push(ur);\r\n              }\r\n            }\r\n          }\r\n        })\r\n        this.setState({ listUser : listUser });\r\n        let converId;\r\n        if(chats.length && firt){\r\n          if(chats[0].from_uid == this.state.user.user_id){\r\n            converId = chats[0].to_uid;\r\n          }\r\n          else{\r\n            converId = chats[0].from_uid;\r\n          }\r\n          let converUser =  users.filter(us => us.user_id == converId);\r\n          this.setState({ conver_user : converUser[0] });\r\n        }\r\n        this.setState({ chats : chats });\r\n        chatArea.scrollBy(0, chatArea.scrollHeight);\r\n        this.setState({ loadingChats: false });\r\n      });\r\n    });\r\n  }\r\n  async componentDidMount() {\r\n    this._isMounted = true;\r\n    $(document).ready(function(){\r\n      $('#action_menu_btn').click(function(){\r\n        $('.action_menu').toggle();\r\n      });\r\n\t  });\r\n    this.setState({ readError: null, loadingChats: true });\r\n    \r\n    updateUserConnection(this.props.user.user_id);\r\n    try {\r\n    \tthis.loadApp(true)\r\n\t    \r\n    } catch (error) {\r\n      this.setState({ readError: error.message, loadingChats: false });\r\n    }\r\n    listenUsers(this);\r\n    listenNewMessage(this);\r\n  }\r\n  handleChange(event) {\r\n    this.setState({\r\n      content: event.target.value\r\n    });\r\n  }\r\n\r\n  async handleSubmit(event) {\r\n    event.preventDefault();\r\n    this.setState({ writeError: null });\r\n    const chatArea = this.myRef.current;\r\n    try {\r\n      let data = {\r\n        content: this.state.content,\r\n        timestamp: Date.now(),\r\n        from_uid: this.state.user.user_id,\r\n        to_uid : this.state.conver_user.user_id,\r\n      };\r\n      await db.ref(\"chats\").push(data);\r\n      this.setState({ content: '' });\r\n      chatArea.scrollBy(0, chatArea.scrollHeight);\r\n    } catch (error) {\r\n      this.setState({ writeError: error.message });\r\n    }\r\n  }\r\n\r\n  formatTime(timestamp) {\r\n    const d = new Date(timestamp);\r\n    const time = `${d.getDate()}/${(d.getMonth()+1)}/${d.getFullYear()} ${d.getHours()}:${d.getMinutes()}`;\r\n    return time;\r\n  }\r\n  renderElementLoading(){\r\n     if(this.state.loadingChats){\r\n        return <div className=\"spinner-border text-success\" role=\"status\">\r\n            <span className=\"sr-only\">Loading...</span>\r\n          </div>\r\n     }\r\n     return null;\r\n  }\r\n  hanldeSwitchConversation(user){\r\n    this.setState({conver_user : user});\r\n  }\r\n  handleChangeSearch(e){\r\n    this.setState({\r\n      search: e.target.value\r\n    });\r\n  }\r\n  renderUser(user,index,search){\r\n      if(user.username.indexOf(search) !== -1){\r\n        return <div key={index} className=\"list__search\" onClick={this.hanldeSwitchConversation.bind(this, user)}>\r\n                <div className=\"search__avatar\"><img src={user.profile_picture} alt=\"\" /></div>\r\n                <div className=\"search__info\">\r\n                  <span className=\"info__name\">{user.username}</span>\r\n                  <span className={\"info__status \" + (user.logged ? 'online' : 'offline')}>{user.logged ? 'online' : 'offline'}</span>\r\n                </div>\r\n              </div>\r\n      }\r\n      return null;\r\n  }\r\n  render() {\r\n   \r\n    return (\r\n      <div>\r\n        <Header user_id={this.state.user.user_id} />\r\n        {this.renderElementLoading()}\r\n        <div className=\"container-fluid chat-page h-100\">\r\n        <div className=\"row justify-content-center h-100\">\r\n          <div className=\"col-md-4 col-xl-3 chat\"><div className=\"card mb-sm-3 mb-md-0 contacts_card\">\r\n              <div className=\"card-header\">\r\n                <div className=\"input-group\">\r\n                  <input type=\"text\" placeholder=\"Search...\" onChange={this.handleChangeSearch} value={this.state.search} className=\"form-control search\" />\r\n                  <div className=\"input-group-prepend\">\r\n                    <span className=\"input-group-text search_btn\"><i className=\"fas fa-search\" /></span>\r\n                  </div>\r\n                  {this.state.search !== '' ? <div className=\"box__search\">\r\n                    <h3 className=\"title__search\">Discover</h3>\r\n                    <div className=\"warpper__search\">\r\n                    {this.state.users.map((user,index) => this.renderUser(user,index,this.state.search))}\r\n                    </div>\r\n                  </div> : ''}\r\n                </div>\r\n              </div>\r\n              <div className=\"card-body contacts_body\">\r\n                <ul className=\"contacts\">\r\n                  {this.state.listUser.map((user,index) => {\r\n                    return <li key={index} className={\"list__user \" + (user.user_id == this.state.conver_user.user_id ? \"active\" : \"\")} onClick={this.hanldeSwitchConversation.bind(this, user)}>\r\n                    <div className=\"d-flex bd-highlight\">\r\n                      <div className=\"img_cont\">\r\n                        <img src={user.profile_picture} className=\"rounded-circle user_img\" />\r\n                        <span className={\"online_icon \" + (user.logged ? '' : 'offline')} />\r\n                      </div>\r\n                      <div className=\"user_info\">\r\n                        <span>{user.username}</span>\r\n                        {\r\n                          user.logged ? \"\" : <p>left {this.formatTime(user.last_online)}</p>\r\n                        }\r\n                      </div>\r\n                    </div>\r\n                  </li>\r\n                  })}\r\n                </ul>\r\n              </div>\r\n              <div className=\"card-footer\" />\r\n            </div></div>\r\n          <div className=\"col-md-8 col-xl-6 chat\" >\r\n            <div className=\"card\">\r\n              <div className=\"card-header msg_head\">\r\n                <div className=\"d-flex bd-highlight\">\r\n                  <div className=\"img_cont\">\r\n                    <img src={this.state.conver_user.profile_picture} className=\"rounded-circle user_img\" />\r\n                    <span className={\"online_icon\" + (this.state.conver_user.logged ? '' : 'offline')} />\r\n                  </div>\r\n                  <div className=\"user_info\">\r\n                    <span>{this.state.conver_user.username}</span>\r\n                  </div>\r\n                  <div className=\"video_cam\">\r\n                    <span><i className=\"fas fa-video\" /></span>\r\n                    <span><i className=\"fas fa-phone\" /></span>\r\n                  </div>\r\n                </div>\r\n                <span id=\"action_menu_btn\"><i className=\"fas fa-ellipsis-v\" /></span>\r\n                <div className=\"action_menu\">\r\n                  <ul>\r\n                    <li><i className=\"fas fa-user-circle\" /> View profile</li>\r\n                    <li><i className=\"fas fa-users\" /> Add to close friends</li>\r\n                    <li><i className=\"fas fa-plus\" /> Add to group</li>\r\n                    <li><i className=\"fas fa-ban\" /> Block</li>\r\n                  </ul>\r\n                </div>\r\n              </div>\r\n              <div className=\"card-body msg_card_body\" ref={this.myRef}>\r\n              {this.state.chats.map((chat, index) => {\r\n                if((chat.from_uid == this.state.conver_user.user_id && chat.to_uid == this.state.user.user_id) || (chat.to_uid == this.state.conver_user.user_id && chat.from_uid == this.state.user.user_id) ){\r\n                  return <div key={index} className={\"d-flex \" +(chat.from_uid == this.state.conver_user.user_id ? 'justify-content-start' : 'justify-content-end') + \" mb-4\"}>\r\n                    <div className=\"img_cont_msg\">\r\n                      <img src={chat.from_uid == this.state.conver_user.user_id ? this.state.conver_user.profile_picture : this.state.user.profile_picture} className=\"rounded-circle user_img_msg\" />\r\n                    </div>\r\n                    <div className=\"msg_cotainer\">\r\n                      {chat.content}\r\n                      <span className=\"msg_time\">{this.formatTime(chat.timestamp)}</span>\r\n                    </div>\r\n                  </div>\r\n                } \r\n                  })}\r\n              </div>\r\n              <div className=\"card-footer\">\r\n                <form onSubmit={this.handleSubmit}>\r\n                  <div className=\"input-group\">\r\n                    <div className=\"input-group-append\">\r\n                      <span className=\"input-group-text attach_btn\"><i className=\"fas fa-paperclip\" /></span>\r\n                    </div>\r\n                    <textarea onKeyUp={this.checkEnter} onChange={this.handleChange} value={this.state.content} className=\"form-control type_msg\" placeholder=\"Type your message...\"></textarea>\r\n                    <div className=\"input-group-append\">\r\n                      \r\n                      <button type=\"submit\"><span className=\"input-group-text send_btn\"><i className=\"fas fa-location-arrow\" /></span></button>\r\n                      \r\n                    </div>\r\n                  </div>\r\n                </form>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n        <div className=\"py-5 mx-3\">\r\n          Login in as: <strong className=\"text-info\">{this.state.user.email}</strong>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import { auth } from \"../services/firebase\";\r\n\r\nexport function signup(email, password) {\r\n  return auth().createUserWithEmailAndPassword(email, password);\r\n}\r\n \r\nexport function signin(email, password) {\r\n\t// auth().signInWithEmailAndPassword(email, password)\r\n\t//   .then((userCredential) => {\r\n\t//     var user = userCredential.user;\r\n\t//     console.log(user);\r\n\t//   })\r\n\t//   .catch((error) => {\r\n\t//     var errorCode = error.code;\r\n\t//     var errorMessage = error.message;\r\n\t//     console.log(error);\r\n\t//   });\r\n  return auth().signInWithEmailAndPassword(email, password);\r\n}\r\n\r\nexport function signInWithGoogle() {\r\n  const provider = new auth.GoogleAuthProvider();\r\n  return auth().signInWithPopup(provider);\r\n}\r\n\r\nexport function signInWithGitHub() {\r\n  const provider = new auth.GithubAuthProvider();\r\n  return auth().signInWithPopup(provider);\r\n}\r\n\r\nexport function logout() {\r\n  return auth().signOut();\r\n}\r\n","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { signup, signInWithGoogle, signInWithGitHub } from \"../helpers/auth\";\r\n\r\nexport default class SignUp extends Component {\r\n\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      error: null,\r\n      email: '',\r\n      password: '',\r\n    };\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.googleSignIn = this.googleSignIn.bind(this);\r\n    this.githubSignIn = this.githubSignIn.bind(this);\r\n  }\r\n\r\n  handleChange(event) {\r\n    this.setState({\r\n      [event.target.name]: event.target.value\r\n    });\r\n  }\r\n\r\n  async handleSubmit(event) {\r\n    event.preventDefault();\r\n    this.setState({ error: '' });\r\n    try {\r\n      let user = await signup(this.state.email, this.state.password);\r\n      console.log(user);\r\n    } catch (error) {\r\n      this.setState({ error: error.message });\r\n    }\r\n  }\r\n  async googleSignIn() {\r\n    try {\r\n      await signInWithGoogle();\r\n    } catch (error) {\r\n      this.setState({ error: error.message });\r\n    }\r\n  }\r\n\r\n  async githubSignIn() {\r\n    try {\r\n      await signInWithGitHub();\r\n    } catch (error) {\r\n      console.log(error)\r\n      this.setState({ error: error.message });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"container\">\r\n        <form className=\"mt-5 py-5 px-5\" onSubmit={this.handleSubmit}>\r\n          <h1>\r\n            Sign Up to\r\n          <Link className=\"title ml-2\" to=\"/\">Chatty</Link>\r\n          </h1>\r\n          <p className=\"lead\">Fill in the form below to create an account.</p>\r\n          <div className=\"form-group\">\r\n            <input className=\"form-control\" placeholder=\"Email\" name=\"email\" type=\"email\" onChange={this.handleChange} value={this.state.email}></input>\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <input className=\"form-control\" placeholder=\"Password\" name=\"password\" onChange={this.handleChange} value={this.state.password} type=\"password\"></input>\r\n          </div>\r\n          <div className=\"form-group\">\r\n            {this.state.error ? <p className=\"text-danger\">{this.state.error}</p> : null}\r\n            <button className=\"btn btn-primary px-5\" type=\"submit\">Sign up</button>\r\n          </div>\r\n          <p>You can also sign up with any of these services</p>\r\n          <button className=\"btn btn-danger mr-2\" type=\"button\" onClick={this.googleSignIn}>\r\n            Sign up with Google\r\n          </button>\r\n          <button className=\"btn btn-secondary\" type=\"button\" onClick={this.githubSignIn}>\r\n            Sign up with GitHub\r\n          </button>\r\n          <hr></hr>\r\n          <p>Already have an account? <Link to=\"/login\">Login</Link></p>\r\n        </form>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { signin, signInWithGoogle, signInWithGitHub } from \"../helpers/auth\";\r\n\r\nexport default class Login extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      error: null,\r\n      email: \"\",\r\n      password: \"\"\r\n    };\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.googleSignIn = this.googleSignIn.bind(this);\r\n    this.githubSignIn = this.githubSignIn.bind(this);\r\n  }\r\n\r\n  handleChange(event) {\r\n    this.setState({\r\n      [event.target.name]: event.target.value\r\n    });\r\n  }\r\n\r\n  async handleSubmit(event) {\r\n    event.preventDefault();\r\n    this.setState({ error: \"\" });\r\n    try {\r\n      await signin(this.state.email, this.state.password);\r\n    } catch (error) {\r\n      this.setState({ error: error.message });\r\n    }\r\n  }\r\n\r\n  async googleSignIn() {\r\n    try {\r\n      await signInWithGoogle();\r\n    } catch (error) {\r\n      this.setState({ error: error.message });\r\n    }\r\n  }\r\n\r\n  async githubSignIn() {\r\n    try {\r\n      await signInWithGitHub();\r\n    } catch (error) {\r\n      this.setState({ error: error.message });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"container\">\r\n        <form\r\n          className=\"mt-5 py-5 px-5\"\r\n          autoComplete=\"off\"\r\n          onSubmit={this.handleSubmit}\r\n        >\r\n          <h1>\r\n            Login to\r\n            <Link className=\"title ml-2\" to=\"/\">\r\n              Chatty\r\n            </Link>\r\n          </h1>\r\n          <p className=\"lead\">\r\n            Fill in the form below to login to your account.\r\n          </p>\r\n          <div className=\"form-group\">\r\n            <input\r\n              className=\"form-control\"\r\n              placeholder=\"Email\"\r\n              name=\"email\"\r\n              type=\"email\"\r\n              onChange={this.handleChange}\r\n              value={this.state.email}\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <input\r\n              className=\"form-control\"\r\n              placeholder=\"Password\"\r\n              name=\"password\"\r\n              onChange={this.handleChange}\r\n              value={this.state.password}\r\n              type=\"password\"\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            {this.state.error ? (\r\n              <p className=\"text-danger\">{this.state.error}</p>\r\n            ) : null}\r\n            <button className=\"btn btn-primary px-5\" type=\"submit\">Login</button>\r\n          </div>\r\n          <p>You can also log in with any of these services</p>\r\n          <button className=\"btn btn-danger mr-2\" type=\"button\" onClick={this.googleSignIn}>\r\n            Sign in with Google\r\n          </button>\r\n          <button className=\"btn btn-secondary\" type=\"button\" onClick={this.githubSignIn}>\r\n            Sign in with GitHub\r\n          </button>\r\n          <hr />\r\n          <p>\r\n            Don't have an account? <Link to=\"/signup\">Sign up</Link>\r\n          </p>\r\n        </form>\r\n\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\nimport { db } from \"./services/firebase\";\r\nimport {\r\n  Route,\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Redirect,\r\n} from \"react-router-dom\";\r\nimport Home from './pages/Home';\r\nimport Chat from './pages/Chat';\r\nimport Signup from './pages/Signup';\r\nimport Login from './pages/Login';\r\nimport { auth } from './services/firebase';\r\nimport { readUsers , addUser } from './helpers/db';\r\nimport './styles.css';\r\nfunction PrivateRoute({ component: Component, authenticated, ...rest }) {\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={props =>\r\n        authenticated === true ? (\r\n          <Component user={rest.user} {...props} />\r\n        ) : (\r\n            <Redirect\r\n              to={{ pathname: \"/login\", state: { from: props.location } }}\r\n            />\r\n          )\r\n      }\r\n    />\r\n  )\r\n}\r\nfunction PublicRoute({ component: Component, authenticated, ...rest }) {\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) => authenticated === false\r\n        ? <Component {...props} />\r\n        : <Redirect to='/chat' />}\r\n    />\r\n  )\r\n}\r\n\r\nclass App extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      authenticated: false,\r\n      loading: true,\r\n    };\r\n  }\r\n  render() {\r\n    return this.state.loading === true ? <h2>Loading...</h2> : (\r\n      <Router>\r\n        <Switch>\r\n          <Route exact path=\"/nbchat1\" component={Home}></Route>\r\n          <PrivateRoute path=\"/chat\" authenticated={this.state.authenticated} component={Chat} user = {this.state.user}></PrivateRoute>\r\n          <PublicRoute path=\"/signup\" authenticated={this.state.authenticated} component={Signup}></PublicRoute>\r\n          <PublicRoute path=\"/login\" authenticated={this.state.authenticated} component={Login}></PublicRoute>\r\n        </Switch>\r\n      </Router>\r\n    );\r\n  }\r\n  componentDidMount() {\r\n  auth().onAuthStateChanged((user) => {\r\n    if (user) {\r\n      let email = user.email;\r\n      let users = [];\r\n    db.ref(\"users\").on(\"value\", snapshot => {\r\n      let snap = snapshot.val();\r\n      for(var s in snap){\r\n        let u = snap[s];\r\n        u.user_id = s;\r\n        users.push(u);\r\n      }\r\n      let curent = null;\r\n      users.forEach(u => {\r\n        if(u.email == email){\r\n          curent = u;\r\n        }\r\n      });\r\n      if(curent == null){\r\n        addUser(email,user.displayName,user.photoURL);\r\n      }\r\n      this.setState({\r\n        authenticated: true,\r\n        loading: false,\r\n        user : curent,\r\n      });\r\n    });\r\n    } else {\r\n      this.setState({\r\n        authenticated: false,\r\n        loading: false,\r\n      });\r\n    }\r\n  })\r\n}\r\n}\r\n\r\nexport default App;","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}